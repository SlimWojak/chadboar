// ChadBoar — OpenClaw Configuration Template (xAI Grok Edition)
// Copy to ~/.openclaw/openclaw.json on VPS.
// Replace <PLACEHOLDERS> with real values.
// JSON5 format (comments + trailing commas allowed).
{
  // ── AGENT CONFIG ──────────────────────────────────────────────────
  agents: {
    defaults: {
      workspace: "/home/autistboar/chadboar",

      // Primary model: xAI Grok 4.1 FAST
      model: {
        primary: "xai/grok-4-1-fast",
      },

      // Declare model with provider config
      models: {
        "xai/grok-4-1-fast": {
          alias: "Grok",
        },
      },

      // Heartbeat: DISABLED — using cron instead (see cron section)
      // Native heartbeat accumulates session context, causing model collapse.
      heartbeat: {
        every: "0",
      },

      userTimezone: "Asia/Singapore",

      compaction: {
        mode: "default",
        memoryFlush: {
          enabled: true,
          softThresholdTokens: 40000,
          prompt: "Distill this session to memory. Focus on trades executed, signals observed, decisions made, and lessons learned. If nothing worth storing: NO_FLUSH",
        },
      },
    },
  },

  // ── MODEL PROVIDERS ─────────────────────────────────────────────
  // xAI uses OpenAI-compatible API format.
  models: {
    providers: {
      xai: {
        baseUrl: "https://api.x.ai/v1",
        api: "openai-completions",
        // API key is set via: openclaw auth (stored in auth.json)
        // Or set XAI_API_KEY environment variable
        models: [
          {
            id: "grok-4-1-fast",
            name: "Grok 4.1 FAST",
            reasoning: true,
            input: ["text"],
            contextWindow: 131072,
            maxTokens: 8192,
          },
        ],
      },
    },
  },

  // ── TELEGRAM ──────────────────────────────────────────────────────
  channels: {
    telegram: {
      botToken: "<TELEGRAM_BOT_TOKEN>",
      allowFrom: ["<G_TELEGRAM_USER_ID>"],
    },
  },

  // ── SKILLS ────────────────────────────────────────────────────────
  skills: {
    entries: {
      "smart-money-oracle": {
        enabled: true,
        env: { NANSEN_API_KEY: "${NANSEN_API_KEY}" },
      },
      "rug-warden": {
        enabled: true,
        env: {
          HELIUS_API_KEY: "${HELIUS_API_KEY}",
          BIRDEYE_API_KEY: "${BIRDEYE_API_KEY}",
        },
      },
      "narrative-hunter": {
        enabled: true,
        env: {
          X_BEARER_TOKEN: "${X_BEARER_TOKEN}",
          BIRDEYE_API_KEY: "${BIRDEYE_API_KEY}",
        },
      },
      "blind-executioner": {
        enabled: true,
        env: { HELIUS_API_KEY: "${HELIUS_API_KEY}" },
      },
      "edge-bank": { enabled: true },
    },
    allowBundled: [],
  },

  // ── LOGGING ───────────────────────────────────────────────────────
  logging: {
    redactSensitive: "tools",
  },

  // ── CRON ──────────────────────────────────────────────────────────
  // Heartbeat runs via cron, not native heartbeat (see AGENTS.md for why).
  // Set up with: openclaw cron add autistboar-heartbeat \
  //   --every "10m" \
  //   --session isolated \
  //   --announce \
  //   --to "-1003795988066" \
  //   --prompt "Read HEARTBEAT.md and follow it strictly. Read state/latest.md for orientation. Output your report as text."
  cron: { enabled: true },
}
